using Console_Project_Fire;
using System;

class Program
{
    static void Main()
    {
        #region 미연시 사진
        Console.WriteLine(",,,,,,,,,,,,,,,,,,,,,,,,,-      ,,  ,..    .~  . -..   ;..-.-,  .,    -   .~~~~~~~~~~~~~~~~~~~~~~~~~\r\n,,,,,,,,,,,,,,,,,,,,,,,,,.      -   ,. ,    ,   ,~    .~:.  .-            .-~~~~~~~~~~~~~~~~~~~~~~~~\r\n,,,,,,,,,,,,,,,,,,,,,,,,, ..    !.,,.. - -..    :~..   .,.   -,   ,- .     -,~~~~~~~~~~~~~~~~~~~~~~~\r\n,,,,,,,,,,,,,,,,,,,,,,,,,       . ,-    ,~..    ,.-.   .- ,  ,~ . -.  ..   -~~~~~~~~~~~~~~~~~~~~~~~~\r\n...,,,,,,,,,,,,,,,,,,,,,,    -     -~   ;:- ..  . ~~   .-..,  ;..-:        ~~-~~~~~~~~~~~~~~~~~~~~~~\r\n...,,,,,,,,,,,,,,,,,,,,,, ,  , -.,,,.   ;:- .., .-.,    ..... ,, .,   . ..  ~~-~~~~~~~~~~~~~~~~~~~~~\r\n....,,,,,,,,,,,,,,,,,.,,. ~    ;~-..   .~:~ ..- .,.:     ~ ~. .!.     ~...  ~~~~~~~~~~~~~~~~~~~~~~~~\r\n....,,,,,,,,,,,,,,,,,,,,,      ;:-.~   .~;; ,,~. ,-,,    ,-.-  ~....~.--., ,:~--~~~~~~~~~~~~~~~~~~~~\r\n......,,,,,,,,,,,,,,,,,,       .-,,,   .-;- -.-- -.~~    .~~~, .....-..:.. .-~~,~~~~~~~~~~~~~~~~~~~~\r\n.......,,,,,,,,,,,,,,,,,  ..    ..    ...-, -,-,   .~, .--,~-. -..,....- .  ,~~~-~~~~~~~~~~~~~~~~~~~\r\n........,,,,,,,,,,,,,,,,  .. . . ;,.  ... - .~..   !*,     ~~   -.,......,  ,~-~~~~~~~~~~~~~~~~~~~~~\r\n.........,,,,,,,,,,,,,,~  .. . ,,-.. -. -;;. -~~,  --~.    .~-  ~,,.... .-  ~~-~--~~~~~~~~~~~~~~~~~~\r\n..........,,,,,,,,,,,,,-  .... ~:.:;,  ~ ,  .,:..  ~.., .   .~,,--,,... .~,..~-~~-~~~~~~~~~~~~~~~~~~\r\n...........,,,,,,,,.,,,. ......~~.      -.:. -,.:  ...~-,  .,~,.,~,-... ~~...------~~~~~~~~~~~~~~~~~\r\n............,,,,,,,,,,,.. .....:...     -.~  .:,.,...:!,:#####$:!-,~... ~....,~-~---~~~~-~~~~~~~~~~~\r\n............,,,,,,,,,,,.~ ... .;.-..,,  ,-,:, -;.-....-*#=;:;=!@*:~:,,. -.-..--------~~~~~~~~~~~~~~~\r\n...............,,,..,,,.; ... .;,:~~::,;;!..~  ~, .,-.$~,.,:.,~,:~~:-,..- :. ~--------~~~~~~~~~~~~~~\r\n...............,,,,,,,,.- .....;:-:$$#$==#;,..:.,  .  - .~~~--,..---,,..-,.-..--------~~~~~~~~~~~~-~\r\n...............,,.,,.,,.. ...;.;:*$#=: ~.:~-.            -,...--,-:-,,...-.~.,---------~--~-~~~-~~~~\r\n....................,,,- ....,.;$@;-,~.~:.!.                ..  .-.-,,.,,.,,-,------------~~~~~~~~~~\r\n....................,,,~..,,. ~;~.  -~~~,;                       - -,,.-..,,-,~-----------~--~~~~~~~\r\n...................,,,,,. ,, -.-..~.,-.,.                        -.-..,~..~,,-~----,---------~~~~~~~\r\n...................,,,,, .,,~:.-. ..                            .-.-,.-~.~.,-,,~---,----------~~~~~~\r\n....................,,,. ..,~:.-.                               -- -,,~-.~~:,--~----------------~~-~\r\n.....................,,- ...,~~,.                               ~  -,,~.. ,;:,-------------------~~~\r\n......................,:,, ...-,.                              .~ .-,.-....;~~,;,------------------~\r\n.....................,.--. .:.,,-               ,,             .. .-...~...;-.,----,---,---..-------\r\n........................., .- :,,.                            .... -...,,,~~-~:-:--,,~. .~.  ~~,,~~-\r\n........................-. .- ,,-,                             .~. -. -~,...--:;-~-  ,   ,- ..-  ---\r\n......................~:.. -. :,-.                            ..~,.-..;~,...:--;:: .!-,   -.!*~  ~--\r\n......................-,.. -  ;-~.                            . -,,-. :;,..--!, ;*-~:*. ..-~!*:..!--\r\n......................,:-: - .:.:..             ....           .,,!-.,~!,.,..:*- ...:;,,...~-**-,;--\r\n.....................-,,-~ ~ -:.;~..           ,,..:-,         -.!!~.-,;-,,.,-;~   ~:,,..-;;-;!;*!~-\r\n.....................-,,-~ : ,;,~;~~          $;,..,~.       ..:,!:~ ..;::,:.,-:    .!,.,:!!.:,;*-.-\r\n......................-,,~~.,.,,-~~~~          .,-,..          ;*::~,.,::~...---:.  .;::.;;*~...*--~\r\n......................:-,:;.-~,,,,:~~.           ...          ,!:~;~~.,-;-,*~.----.   ;:~,:!;  .-.  \r\n.....................-,-,~-,~-~,,.:~~;~          ,,          ~!!:~;--.,,~~,-,-----,.  .!:~:;-.,.    \r\n....................,..-,~..:,*,. :~,~;-                    -*!!::;,,-,,~~-.!,,----..     :!;~      \r\n....................--,,:~.-,~~.. ~~.~;;-.                 .-*!!;;:,,:~,:~-~:,,----,.        ,,,...,\r\n......................,,;-.-,--,..~-.-!~;!.              ...-*~*:,;,.~;,:;---;.,----.           -..,\r\n....................~~-,:,,~,-~,..~~ -!~:*!!,            -..-!;!:!!,,,;,~,~.,:-,----~           .~,.\r\n....................,.~.:,..-:-,..~~ ~!:~*!!..          ....!!*;::;~:.:,:.:,~-:::----.            --\r\n...................-,.~.~~,,;!~.,.~- :*::!!!...,      .,....!!*;;,!--.:,.~~,::~,:----,            .~\r\n....................---,~-..:;~: .,. :!:;;*!,...,,.. .......!!*!;,;.-.:,..,,.~~------,              \r\n..................,~,~-~-,--;*~~-.:..~;:!!*!-.....,........ !!!~;-;:-.:~:.:,.:~~,---,--.            \r\n.....................:-;--~::*;!: :,.~::;!!$;.............  =*!*~-:-,.:!~.;:,,;;.~------:          ");
        #endregion

        // 사용자 이름 설정을 위해 초기화
        // 초기화 시켜놓지 않으면 밑에 if문에서 할당되지 않은 지역변수 name을 사용했다고 나옵니다.
        // 할당되지 않은 지역변수라는 오류를 보면 당황하지말고, 초기화를 시켜놓읍시다.
        string name = default;

        // 대사 저장한 Class Talking 생성자
        Talking talking = new Talking();

        // 해당 배열마다 대사를 뽑기 위한 변수 선언
        int Index = 0;

        // 게임 진행 중 어디서 나간지 확인하기 위한 변수 선언
        int gameOut = 0;

        // 불 배열 선언해서 if(key == ConsoleKey.Enter)

        // 미연시 사진과 같이 출력 될 시작 메세지
        Console.WriteLine("안녕하세요!");
        Console.WriteLine("망상의 나라 [찐따인 내가  도내 최상위 쿨뷰티 초S급 미녀 일진과 연애를...?]에 오신 것을 환영합니다.");
        Console.WriteLine("게임 진행을 위해 이름을 작성하고 Enter키를 2번 눌러주세요");
        Console.Write("이름 : ");
        name = Console.ReadLine();

        // 해당 배열마다 주인공 -> name으로 바꿔주기 위한 구문
        for (int i = 0; i < talking.Talk.Length; i++)
        {
            // 변경된 이름을 string 타입에 talking.Talk로 넣어줍니다.
            talking.Talk[i] = talking.Talk[i].Replace("주인공", name);
        }



        // 게임 루프
        while (true)
        {
            //==============Render================
            


            //=============ProcessInput===========
            ConsoleKey key = ConsoleKey.NoName; // 콘솔 키 소환, 아무것도 아닌 상태

            if (Console.KeyAvailable == true) // 콘솔을 비동기로 만들어준다. 키를 눌렀을 때만 실행하도록 만들어준다.
            {
                key = Console.ReadKey().Key;
            }


            //=============Update=================

            // 게임 대사 및 나레이션
            if (key == ConsoleKey.Enter)
            {
                Console.WriteLine("=============================================================================================================");
                Console.WriteLine(" ");
                Console.WriteLine(talking.Talk[Index]);
                ++Index;
                Console.WriteLine(" ");

                if (talking.Talk[Index] == "선택 1번 문항")
                {
                    Console.WriteLine("1번 : 간다");
                    Console.WriteLine("2번 : 안간다");
                    talking.Talk[Index] = talking.Talk[Index].Replace("선택 1번 문항", " ");
                    key = Console.ReadKey().Key;


                    if (key == ConsoleKey.D1 || key == ConsoleKey.NumPad1)
                    {
                        continue;

                    }

                    if (key == ConsoleKey.D2 || key == ConsoleKey.NumPad2)
                    {
                        talking.Talk[Index] = talking.Talk[Index].Replace("선택 1번 문항", "겁쟁이인 당신 도망쳤군요!");
                        gameOut = 1;
                        break;
                    }
                }
            }


        }


        if (gameOut == 1)
        {
            Console.Clear();
            string str = name;
            Console.WriteLine($"{str}은(는) 무서워서 도망갔습니다.");
            Console.WriteLine("그녀는 결국...나쁜 사람들 손에 다쳤고, 주인공은(는) 방관죄로 감옥에 들어갔습니다.");
            Console.WriteLine("불의를 보면 참지 말고 싸우세요!");
        }

    }
}